---------------------------------
S1
enable
config t
hostname S1

vlan 30
 name TI
vlan 20
 name VENTAS
vlan 10
 name GERENCIA
exit

int range fa0/21 -24
 switchport mode access
 switchport access vlan 30
int range f0/16 -20
 switchport mode access
 switchport access vlan 20

int range fa0/4 -6
 shut
 channel-group 1 mode active
 shut

int Po1
 switchport mode trunk
 switchport trunk native vlan 77
do wr
---------------------------------
S2
enable
config t
hostname S2

vlan 30
 name TI
vlan 20
 name VENTAS
vlan 10
 name GERENCIA
exit

int range fa0/7 -15
 switchport mode access
 switchport access vlan 10

int range fa0/4 -6
 channel-group 1 mode passive

int Po1
 switchport mode trunk
 switchport trunk native vlan 77

int range fa0/1 -3
 channel-group 2 mode desirable
 shut

int Po2
 switchport mode trunk
 switchport trunk native vlan 77

do wr
-----------------------------------
S3
enable
config t
hostname S3

vlan 30
 name TI
vlan 20
 name VENTAS
vlan 10
 name GERENCIA
exit

int range fa0/1 -3
 shut
 channel-group 2 mode auto
 shut

int Po2
 switchport mode trunk
 switchport trunk native vlan 77

int g0/1
 switchport mode trunk
 switchport trunk native vlan 77

do wr
-------------------R1-------------------
enable
config t
hostname R1-CPS

int g0/0/1.10
 encap dot1q 10
 ip add 10.10.15.1 255.255.255.0
 ip helper-add 10.10.5.10
int g0/0/1.20
 encap dot1q 20
 ip add 10.10.20.1 255.255.255.0
 ip helper-add 10.10.5.10
int g0/0/1.30
 encap dot1q 30
 ip add 10.10.30.1 255.255.255.0
 ip helper-add 10.10.5.10

int g0/0/1.77
 encap dot1q 77 native
int g0/0/1
 no shut

int g0/0/0
 ip add 10.10.5.1 255.255.255.252
 no shut

router ospf 1
router-id 1.1.1.1
network 10.10.30.0 0.0.0.255 area 100
network 10.10.20.0 0.0.0.255 area 100
network 10.10.15.0 0.0.0.255 area 100
network 10.10.5.0 0.0.0.3 area 100 
passive-int g0/0/1.10
passive-int g0/0/1.20 
passive-int g0/0/1.30 

do wr
---------------------------------------
R2
enable
config t
hostname R2-CPS

int g0/0/1
 ip add 10.10.5.5 255.255.255.252
 no shut
int g0/0/0
 ip add 10.10.5.2 255.255.255.252
 no shut


router ospf 2
 router-id 2.2.2.2
 network 10.10.5.0 0.0.0.3 area 100
 network 10.10.5.4 0.0.0.3 area 0
do wr
---------------------------------------
R3
enable
config t
hostname R3-CPS

int g0/0/1
 ip add 10.10.5.6 255.255.255.252
 no shut
int g0/0/0
 ip add 10.10.5.9 255.255.255.252
 no shut


router ospf 3
 router-id 3.3.3.3
 network 10.10.5.4 0.0.0.3 area 0
 network 10.10.5.8 0.0.0.3 area 0
do wr
---------------------------------------
R4
enable
config t
hostname R4-CPS

int g0/0/0
 ip add 10.10.5.10 255.255.255.252
 no shut
int g0/0/1
 ip add 10.10.5.13 255.255.255.252
 no shut

router ospf 4
 router-id 4.4.4.4
 network 10.10.5.8 0.0.0.3 area 0
 network 10.10.5.12 0.0.0.3 area 200

ip dhcp excluded-address 10.10.30.1 10.10.30.2
ip dhcp excluded-address 10.10.20.1 10.10.20.2
ip dhcp excluded-address 10.10.15.1 10.10.15.2


ip dhcp pool V10
 network 10.10.15.0 255.255.255.0
 default-router 10.10.15.1
 dns-server 8.8.8.8
ip dhcp pool V20
 network 10.10.20.0 255.255.255.0
 default-router 10.10.20.1
 dns-server 8.8.8.8
ip dhcp pool V30
 network 10.10.30.0 255.255.255.0
 default-router 10.10.30.1
 dns-server 8.8.8.8
do wr
---------------------------------------
R5
enable
config t
hostname R5-CPS

int s0/1/0
 ip add 7.7.7.1 255.255.255.252
 clock rate 4000000
 no shut
int g0/0/1
 ip add 10.10.5.14 255.255.255.252
 no shut

ip route 0.0.0.0 0.0.0.0 s0/1/0

router ospf 5
 router-id 5.5.5.5
 network 10.10.5.12 0.0.0.3 area 200
 default-information originate

router bgp 777
 bgp router-id 5.5.5.5
 neighbor 7.7.7.2 remote-as 555
 network 7.7.7.0 mask 255.255.255.252
do wr
---------------------------------------
ISP-1
enable
config t
hostname ISP1-CPS

int s0/1/0
 ip add 7.7.7.2 255.255.255.252
 no shut
int s0/2/0
 ip add 7.7.7.5 255.255.255.252
 clock rate 4000000
 no shut

router bgp 555
 bgp router-id 6.6.6.6
 neighbor 7.7.7.6 remote-as 333
 neighbor 7.7.7.1 remote-as 777
do wr
---------------------------------------
ISP-2
enable
config t
hostname ISP2-CPS

int s0/1/0
 ip add 7.7.7.9 255.255.255.252
 clock rate 4000000
 no shut
int s0/2/0
 ip add 7.7.7.6 255.255.255.252
 no shut

router bgp 333
 bgp router-id 7.7.7.7
 neighbor 7.7.7.5 remote-as 555
 neighbor 7.7.7.10 remote-as 111
do wr
---------------------------------------
ISP-3
enable
config t
hostname ISP-3

int g0/0/1
 ip add 8.8.8.1 255.255.255.0
 no shut
int g0/0/0
 ip add 210.5.5.1 255.255.255.0
 no shut
int s0/1/0
 ip add 7.7.7.10 255.255.255.252
 no shut

router bgp 111
 bgp router-id 8.8.8.8
 neighbor 7.7.7.9 remote-as 333
 network 8.8.8.0 mask 255.255.255.0
 network 210.5.5.0 mask 255.255.255.0
do wr
--------------------------------------
-------------------------------------
PAT (NAT Sobrecarga)

access-list 10 permit 10.10.15.0 0.0.0.255
access-list 10 permit 10.10.20.0 0.0.0.255
access-list 10 permit 10.10.30.0 0.0.0.255

ip nat inside source list 10 interface s0/1/0 overload

int g0/0/1
 ip nat inside

int s0/1/0
 ip nat outside
----------------------------------------
*****ACL*********
access-list 100 deny tcp 10.10.15.4 0.0.0.255 host 210.5.5.10 eq 80
access-list 100 deny tcp 10.10.20.4 0.0.0.255 host 210.5.5.10 eq 80
access-list 100 deny tcp 10.10.30.4 0.0.0.255 host 210.5.5.10 eq 80

access-list 100 deny icmp 10.10.15.4 0.0.0.255 host 8.8.8.8 
access-list 100 deny icmp 10.10.20.4 0.0.0.255 host 8.8.8.8 
access-list 100 deny icmp 10.10.30.4 0.0.0.255 host 8.8.8.8 
access-list 100 permit ip any any 

int g0/0/1.10
 ip access-group 100 in 
int g0/0/1.20
 ip access-group 100 in 
int g0/0/1.30
 ip access-group 100 in 